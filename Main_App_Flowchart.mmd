---
config:
  look: neo
---
flowchart TD
    subgraph MainApp["AI Job Description Manager"]
        A1["Generate Job Description"]
        A2["Store Job Description"]
        A3["Read Job Description"]
        A4["Query Job Description"]
    end

    subgraph API["API Layer"]
        B1["Generate JD API"]
        B2["Store JD API"]
        B3["Read JD API"]
    end

    subgraph Agents["JD Agents"]
        C1["JD Agent Orchestrator"]
        C2["Clarifier Agent"]
        C3["Generator Agent"]
        C4["Critique Agent"]
        C5["Compliance Agent"]
        C6["Rewrite Agent"]
        C7["Finalizer Agent"]
    end

    subgraph DataStore["Data Storage"]
        D1["SQLite Database"]
        E1["Document Processor"]
        E2["Query Handler"]
    end

    subgraph EmbeddingsBackend["Embeddings Backend"]
        F1["FastAPI Backend"]
        F2["Document Processor"]
        F3["HuggingFace Embeddings"]
        F4["FAISS Vector Store"]
        F5["RAG Model"]
        F6["Groq Llama3-8B API"]
    end

    %% Main App Flow
    A1 -->|Generate| B1
    B1 -->|Orchestrate| C1
    C1 -->|Clarify| C2
    C1 -->|Generate| C3
    C1 -->|Critique| C4
    C1 -->|Compliance| C5
    C1 -->|Rewrite| C6
    C1 -->|Finalize| C7

    %% Storage Flow
    A2 -->|Save| B2
    B2 -->|Store| D1
    D1 -->|Process| E1
    E1 -->|Generate Embeddings| F1

    %% Reading Flow
    A3 -->|Read| B3
    B3 -->|Fetch| D1

    %% Query Flow
    A4 -->|Query| E2
    E2 -->|Search| F1

    %% Embeddings Backend Flow
    F1 -->|Load PDFs| F2
    F2 -->|Split & Embed| F3
    F3 -->|Store| F4
    F1 -->|Query| F5
    F5 -->|Retrieve| F4
    F5 -->|Call| F6
    F6 -->|Return Answer| F5
    F5 -->|Return Result| F1

    %% Styling
    style MainApp fill:#f9f,stroke:#333,stroke-width:1px
    style API fill:#bbf,stroke:#333,stroke-width:1px
    style Agents fill:#bfb,stroke:#333,stroke-width:1px
    style DataStore fill:#fdd,stroke:#333,stroke-width:1px
    style EmbeddingsBackend fill:#ffd,stroke:#333,stroke-width:1px 